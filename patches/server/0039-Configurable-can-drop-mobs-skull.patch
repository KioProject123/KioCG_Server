From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Joket_abc <15005771700@qq.com>
Date: Wed, 5 Jun 2024 15:25:43 +0800
Subject: [PATCH] Configurable can drop mobs skull


diff --git a/src/main/java/io/papermc/paper/configuration/WorldConfiguration.java b/src/main/java/io/papermc/paper/configuration/WorldConfiguration.java
index e36dfa38204a3b28c0236c108adc0ed6357c7ed7..39703f1cf2bd79ba79674e3f4ccb8d4855797116 100644
--- a/src/main/java/io/papermc/paper/configuration/WorldConfiguration.java
+++ b/src/main/java/io/papermc/paper/configuration/WorldConfiguration.java
@@ -594,6 +594,15 @@ public class WorldConfiguration extends ConfigurationPart {
                 public int darkEnoughToSprint = 7;
                 public boolean babyZombieJockey = true;
                 public boolean zombiesSkinnedIntoSkeletons = true;
+
+                public Monster.Creeper creeper;
+                public class Creeper extends ConfigurationPart {
+                    public boolean canDropCreeperSkull = true;
+                    public boolean canDropSkeletonSkull = true;
+                    public boolean canDropWitherSkeletonSkull = true;
+                    public boolean canDropZombieSkull = true;
+                    public boolean canDropPiglinSkull = true;
+                }
             }
 
             public KiocgConfig.Entity.Animal animal;
diff --git a/src/main/java/net/minecraft/world/entity/monster/Creeper.java b/src/main/java/net/minecraft/world/entity/monster/Creeper.java
index cb1b19e2e0d8f0744b2355b8f4da0206b196b19c..5c32b2c473e5e56d6bd30218d3fea64ce5809b12 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Creeper.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Creeper.java
@@ -191,7 +191,7 @@ public class Creeper extends Monster implements PowerableMob {
         Entity entity = source.getEntity();
 
         if (entity != this && entity instanceof Creeper entitycreeper) {
-            if (entitycreeper.canDropMobsSkull()) {
+            if (entitycreeper.level().paperConfig().kiocgConfig.entity.monster.creeper.canDropCreeperSkull && entitycreeper.canDropMobsSkull()) { // KioCG
                 entitycreeper.increaseDroppedSkulls();
                 this.spawnAtLocation((ItemLike) Items.CREEPER_HEAD);
             }
diff --git a/src/main/java/net/minecraft/world/entity/monster/Skeleton.java b/src/main/java/net/minecraft/world/entity/monster/Skeleton.java
index cee42ae2b75c29c89e7fc5b1c77d3b45ce40e9ba..2edba3d770fd577f331174b6fe75e8e7410f8e95 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Skeleton.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Skeleton.java
@@ -134,7 +134,7 @@ public class Skeleton extends AbstractSkeleton {
         Entity entity = source.getEntity();
 
         if (entity instanceof Creeper entitycreeper) {
-            if (entitycreeper.canDropMobsSkull()) {
+            if (entitycreeper.level().paperConfig().kiocgConfig.entity.monster.creeper.canDropSkeletonSkull && entitycreeper.canDropMobsSkull()) { // KioCG
                 entitycreeper.increaseDroppedSkulls();
                 this.spawnAtLocation((ItemLike) Items.SKELETON_SKULL);
             }
diff --git a/src/main/java/net/minecraft/world/entity/monster/WitherSkeleton.java b/src/main/java/net/minecraft/world/entity/monster/WitherSkeleton.java
index bb2e7cee612dc1fafa042674a0b0d07d7165b54c..98b60652732fcaf3b13a3c093b90a6fa2dfa32d9 100644
--- a/src/main/java/net/minecraft/world/entity/monster/WitherSkeleton.java
+++ b/src/main/java/net/minecraft/world/entity/monster/WitherSkeleton.java
@@ -65,7 +65,7 @@ public class WitherSkeleton extends AbstractSkeleton {
         Entity entity = source.getEntity();
 
         if (entity instanceof Creeper entitycreeper) {
-            if (entitycreeper.canDropMobsSkull()) {
+            if (entitycreeper.level().paperConfig().kiocgConfig.entity.monster.creeper.canDropWitherSkeletonSkull && entitycreeper.canDropMobsSkull()) { // KioCG
                 entitycreeper.increaseDroppedSkulls();
                 this.spawnAtLocation((ItemLike) Items.WITHER_SKELETON_SKULL);
             }
diff --git a/src/main/java/net/minecraft/world/entity/monster/Zombie.java b/src/main/java/net/minecraft/world/entity/monster/Zombie.java
index e9c3e85bbc8802b300a743dad4807ffbbebb6a7c..752cd457ed8a5eace5ced48030efcb2e7916b0d9 100644
--- a/src/main/java/net/minecraft/world/entity/monster/Zombie.java
+++ b/src/main/java/net/minecraft/world/entity/monster/Zombie.java
@@ -650,7 +650,7 @@ public class Zombie extends Monster {
         Entity entity = source.getEntity();
 
         if (entity instanceof Creeper entitycreeper) {
-            if (entitycreeper.canDropMobsSkull()) {
+            if (entitycreeper.level().paperConfig().kiocgConfig.entity.monster.creeper.canDropZombieSkull && entitycreeper.canDropMobsSkull()) { // KioCG
                 ItemStack itemstack = this.getSkull();
 
                 if (!itemstack.isEmpty()) {
diff --git a/src/main/java/net/minecraft/world/entity/monster/piglin/Piglin.java b/src/main/java/net/minecraft/world/entity/monster/piglin/Piglin.java
index d62b59a16fcc317cb9d1ea9e4d89d128e6fbf2a7..88f6663a39604005a831a741d5b816c19730b8f2 100644
--- a/src/main/java/net/minecraft/world/entity/monster/piglin/Piglin.java
+++ b/src/main/java/net/minecraft/world/entity/monster/piglin/Piglin.java
@@ -139,7 +139,7 @@ public class Piglin extends AbstractPiglin implements CrossbowAttackMob, Invento
         Entity entity = source.getEntity();
 
         if (entity instanceof Creeper entitycreeper) {
-            if (entitycreeper.canDropMobsSkull()) {
+            if (entitycreeper.level().paperConfig().kiocgConfig.entity.monster.creeper.canDropPiglinSkull && entitycreeper.canDropMobsSkull()) { // KioCG
                 ItemStack itemstack = new ItemStack(Items.PIGLIN_HEAD);
 
                 entitycreeper.increaseDroppedSkulls();
